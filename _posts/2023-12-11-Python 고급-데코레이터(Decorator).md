---
title: Python ê³ ê¸‰-ë°ì½”ë ˆì´í„°(Decorator)
date: 2023-12-11 23:58:00 +09:00
categories: [Python, Python_Advanced]
tags:
  [
    Flask,
    Python,
    ë°ì½”ë ˆì´í„°,
    ë¼ì¦ˆë² ë¦¬íŒŒì´,
    ì›¹ì„œë²„,
    Decorator,
  ]
---

# ë°ì½”ë ˆì´í„°

## 1. ë°ì½”ë ˆì´í„°(Decorator)ë€?
- ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ê³  ê·¸ í•¨ìˆ˜ë¥¼ ê°ì‹¸ì„œ(wrapper) ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- ì´ ê°ì‹¸ëŠ” í•¨ìˆ˜ëŠ” ì›ë˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ì „í›„ì— ì¶”ê°€ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ 

## 2. ì‚¬ìš© ë°©ë²•
- '@' ê¸°í˜¸ì™€ í•¨ê»˜ í•¨ìˆ˜ ì •ì˜ ë°”ë¡œ ìœ„ì— ì‘ì„±í•œë‹¤. í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë¡œ "ê°ì‹¸ê² ë‹¤"ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

## 3. ë™ì‘ ë°©ì‹
- ë°ì½”ë ˆì´í„°ê°€ ì ìš©ëœ í•¨ìˆ˜(ì•„ë˜ 'say_hello()')ë¥¼ í˜¸ì¶œí•˜ë©´, ì‹¤ì œë¡œëŠ” ë°ì½”ë ˆì´í„° ë‚´ë¶€ì˜ ê°ì‹¸ëŠ” í•¨ìˆ˜('wrapper()')ê°€ ë¨¼ì € í˜¸ì¶œëœë‹¤.
- 'wrapper()' í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì›ë˜ì˜ í•¨ìˆ˜ 'hello'ê°€ í˜¸ì¶œë˜ê¸° ì „í›„ë¡œ ì¶”ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
- ì›ë˜ í•¨ìˆ˜ì˜ ë™ì‘ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ë§ë¶™ì¼ ìˆ˜ ìˆë‹¤.

```python
def kt_decorator(func):
    def wrapper():
        print("ì•ˆë…•?")
        func()
        print("ë¹ ì´")
    return wrapper

@kt_decorator
def hello():
    print("Hello!")

hello()
```
>ìœ„ ì˜ˆì œì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¼ì„ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•´ ë³´ìë©´..
>1. 'hello()' í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
>2. ë°ì½”ë ˆì´í„° 'kt_decorator'ê°€ ì ìš©ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì‹¤ì œë¡œëŠ” 'wrapper()' í•¨ìˆ˜ê°€ ë¨¼ì € í˜¸ì¶œëœë‹¤.
>3. 'wrapper()' í•¨ìˆ˜ ë‚´ì—ì„œ "ì•ˆë…•?" ì´ ì¶œë ¥ëœë‹¤.
>4. 'wrapper()' í•¨ìˆ˜ ë‚´ì—ì„œ ì›ë˜ì˜ 'hello()' í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ "Hello!"ê°€ ì¶œë ¥ëœë‹¤.
>5. 'wrapper()'í•¨ìˆ˜ ë‚´ì—ì„œ "ë¹ ì´"ê°€ ì¶œë ¥ëœë‹¤.



```python
def wrapper():
    # ë°ì½”ë ˆì´í„°ì˜ ì¶”ê°€ì ì¸ ì‘ì—…
    func()  # ì›ë˜ í•¨ìˆ˜ í˜¸ì¶œ
    # ì¶”ê°€ ì‘ì—… ê³„ì†
```
### ğŸ¤–'func' ì€ ë°ì½”ë ˆì´í„° ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜ì´ê³ , ë°ì½”ë ˆì´í„°ì— ê°ì‹¸ì§ˆ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•¨

## 4. ì‹¤ìš©ì ì¸ ì˜ˆì œ(Flask)
- ì•„ë˜ì— ì›¹ í˜ì´ì§€ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ê°„ë‹¨í•œ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ì›¹ ì„œë²„ ì˜ˆì œë¥¼ ì‚´í´ë³´ì.
- ì‚¬ìš©ìê°€ ì›¹ìœ¼ë¡œ '(ì£¼ì†Œ)/'ì— ì ‘ê·¼í•˜ë©´, 'home' í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  "Welcome to the Home Page!"ë¼ëŠ” ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- 'log_request' ë°ì½”ë ˆì´í„°ê°€ 'home' í•¨ìˆ˜ì— ì ìš©ë˜ì–´ 'home'í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œ "Request received for:home"ë¼ëŠ” ë¡œê·¸ ë©”ì„¸ì§€ê°€ ì½˜ì†”ì— ì¶œë ¥ëœë‹¤.

```python
from flask import Flask

app = Flask(__name__)

def log_request(func):
    def wrapper(*args, **kwargs):
        print(f"Request received for: {func.__name__}")
        return func(*args, **kwargs)
    return wrapper

@app.route('/')
@log_request
def home():
    return "Welcome to the Home Page!"

if __name__ == '__main__':
    app.run(debug=True)
```

### step1. Flask ì´ˆê¸°í™”
  ```python
  app = Flask(__name__)
  ```
  - Flask ì•± ìƒì„±
  - '__ _name___'ì€ í˜„ì¬ íŒŒì¼ì„ ë‚˜íƒ€ë‚¸ë‹¤.

### step2. ë°ì½”ë ˆì´í„° ì •ì˜
  ```python
  def log_request(func):
    def wrapper(*args, **kwargs):
        print(f"Request received for: {func.__name__}")
        return func(*args, **kwargs)
    return wrapper
  ```
  - 'log_request'ê°€ ë°ì½”ë ˆì´í„° í•¨ìˆ˜. ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê°ì‹¸ê³  ìˆê³ , ì¶”ê°€ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
  - 'wrapper'í•¨ìˆ˜ëŠ” ì‹¤ì œë¡œ ë°ì½”ë ˆì´í„°ê°€ ì ìš©ë  í•¨ìˆ˜('home')ì„ ì‹¤í–‰í•œë‹¤.
  - '*args'ì™€ '**kwargs'ëŠ” ëª¨ë“  ì¢…ë¥˜ì˜ ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

### step3. ë¼ìš°íŠ¸ ì„¤ì •, ë°ì½”ë ˆì´í„° ì ìš©
```python
@app.route('/')
@log_request
def home():
    return "Welcome to the Home Page!"
```
  - '@app.route('/')'ëŠ” Flaskì˜ ë¼ìš°íŒ… ë°ì½”ë ˆì´í„°ë¡œ, root URL('/')ì— ëŒ€í•œ ìš”ì²­ì„ 'home()'í•¨ìˆ˜ë¡œ ì—°ê²°í•œë‹¤.
  - '@log_request'ëŠ” 'log_request' ë°ì½”ë ˆì´í„°ë¥¼ 'home' í•¨ìˆ˜ì— ì ìš©í•œë‹¤.

### step4. ì•±ì‹¤í–‰
  ```python
  if __name__ == '__main__':
    app.run(debug=True)
```
- ìŠ¤í¬ë¦½íŠ¸ê°€ ì§ì ‘ ì‹¤í–‰ë  ë•Œë§Œ Flask ì„œë²„ë¥¼ ì‹œì‘í•˜ë„ë¡ í•œë‹¤.
- 'debug=True'ëŠ” ë””ë²„ê·¸ ì •ë³´ë¥¼ ì œê³µí•˜ê²Œ í•œë‹¤.